(this.webpackJsonphero_admin_panel=this.webpackJsonphero_admin_panel||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),c=a(7),n=a.n(c),l=a(5);const o=()=>{const e=Object(s.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};try{const r=await fetch(e,{method:t,body:a,headers:s});if(!r.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(r.status));return await r.json()}catch(r){throw r}}),[]);return{request:e}};var i=a(36),d=a(38),h=a(16);const b=()=>({type:"HEROES_FETCHING"}),j=e=>({type:"HEROES_FETCHED",payload:e}),m=()=>({type:"HEROES_FETCHING_ERROR"}),u=()=>({type:"FILTERS_FETCHING"}),O=e=>({type:"FILTERS_FETCHED",payload:e}),p=()=>({type:"FILTERS_FETCHING_ERROR"});var g=a(1);var E=e=>{let t,{name:a,description:s,element:r,onDelete:c}=e;switch(r){case"fire":t="bg-danger bg-gradient";break;case"water":t="bg-primary bg-gradient";break;case"wind":t="bg-success bg-gradient";break;case"earth":t="bg-secondary bg-gradient";break;default:t="bg-warning bg-gradient"}return Object(g.jsxs)("li",{className:"card flex-row mb-4 shadow-lg text-white ".concat(t),children:[Object(g.jsx)("img",{src:"https://em-content.zobj.net/source/joypixels/369/person-facepalming_1f926.png",className:"img-fluid w-25 d-inline",alt:"unknown hero",style:{objectFit:"cover"}}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)("h3",{className:"card-title",children:a}),Object(g.jsx)("p",{className:"card-text",children:s})]}),Object(g.jsx)("span",{onClick:c,className:"position-absolute top-0 start-100 translate-middle badge border rounded-pill bg-light",children:Object(g.jsx)("button",{type:"button",className:"btn-close btn-close","aria-label":"Close"})})]})};var x=()=>Object(g.jsx)("div",{className:"spinner-border mx-auto mt-5",role:"status",children:Object(g.jsx)("span",{className:"visually-hidden",children:"Loading..."})});a(28);var f=()=>{const e=Object(h.a)((e=>e.filters.activeFilter),(e=>e.heroes.heroes),((e,t)=>"all"===e?t:t.filter((t=>t.element===e)))),t=Object(l.c)(e),a=Object(l.c)((e=>e.heroes.heroesLoadingStatus)),r=Object(l.b)(),{request:c}=o();Object(s.useEffect)((()=>{r((e=>t=>{t(b()),e("http://localhost:3001/heroes").then((e=>t(j(e)))).catch((()=>t(m())))})(c))}),[]);const n=Object(s.useCallback)((e=>{c("http://localhost:3001/heroes/".concat(e),"DELETE").then((e=>console.log(e,"Deleted"))).then(r((e=>({type:"HERO_DELETED",payload:e}))(e))).catch((e=>console.log(e)))}),[c]);if("loading"===a)return Object(g.jsx)(x,{});if("error"===a)return Object(g.jsx)("h5",{className:"text-center mt-5",children:"Loading error"});const u=0===(O=t).length?Object(g.jsx)(i.a,{timeout:0,classNames:"hero",children:Object(g.jsx)("h5",{className:"text-center mt-5",children:"There are no heroes yet"})}):O.map((e=>{let{id:t,...a}=e;return Object(g.jsx)(i.a,{timeout:500,classNames:"hero",children:Object(g.jsx)(E,{...a,onDelete:()=>n(t)})},t)}));var O;return Object(g.jsx)(d.a,{component:"ul",children:u})},v=a(37);var N=()=>{const[e,t]=Object(s.useState)(""),[a,r]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),{filters:i,filtersLoadingStatus:d}=Object(l.c)((e=>e.filters)),h=Object(l.b)(),{request:b}=o();return Object(g.jsxs)("form",{className:"border p-4 shadow-lg rounded",onSubmit:s=>{s.preventDefault();const l={id:Object(v.a)(),name:e,description:a,element:c};var o;b("http://localhost:3001/heroes","POST",JSON.stringify(l)).then((e=>console.log(e,"Sending is successful"))).then(h((o=l,{type:"HERO_CREATED",payload:o}))).catch((e=>console.log(e))),t(""),r(""),n("")},children:[Object(g.jsxs)("div",{className:"mb-3",children:[Object(g.jsx)("label",{htmlFor:"name",className:"form-label fs-4",children:"The name of the new hero"}),Object(g.jsx)("input",{required:!0,type:"text",name:"name",className:"form-control",id:"name",placeholder:"What's my name?",value:e,onChange:e=>t(e.target.value)})]}),Object(g.jsxs)("div",{className:"mb-3",children:[Object(g.jsx)("label",{htmlFor:"text",className:"form-label fs-4",children:"Description"}),Object(g.jsx)("textarea",{required:!0,name:"text",className:"form-control",id:"text",placeholder:"What I can do?",style:{height:"130px"},value:a,onChange:e=>r(e.target.value)})]}),Object(g.jsxs)("div",{className:"mb-3",children:[Object(g.jsx)("label",{htmlFor:"element",className:"form-label",children:"Choose a hero element"}),Object(g.jsxs)("select",{required:!0,className:"form-select",id:"element",name:"element",value:c,onChange:e=>n(e.target.value),children:[Object(g.jsx)("option",{value:"",children:"I own an element..."}),((e,t)=>"loading"===t?Object(g.jsx)("option",{children:"Loading elements"}):"error"===t?Object(g.jsx)("option",{children:"Loading error"}):e&&e.length>0?e.map((e=>{let{name:t,label:a}=e;if("all"!==t)return Object(g.jsx)("option",{value:t,children:a},t)})):void 0)(i,d)]})]}),Object(g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})]})},y=a(17),T=a.n(y);var R=()=>{const{filters:e,filtersLoadingStatus:t,activeFilter:a}=Object(l.c)((e=>e.filters)),r=Object(l.b)(),{request:c}=o();if(Object(s.useEffect)((()=>{r((e=>t=>{t(u()),e("http://localhost:3001/filters").then((e=>t(O(e)))).catch((()=>t(p())))})(c))}),[]),"loading"===t)return Object(g.jsx)(x,{});if("error"===t)return Object(g.jsx)("h5",{className:"text-center mt-5",children:"Loading error"});const n=0===(i=e).length?Object(g.jsx)("h5",{className:"text-center mt-5",children:"No filters found"}):i.map((e=>{let{name:t,className:s,label:c}=e;const n=T()("btn",s,{active:t===a});return Object(g.jsx)("button",{id:t,className:n,onClick:()=>r({type:"ACTIVE_FILTER_CHANGED",payload:t}),children:c},t)}));var i;return Object(g.jsx)("div",{className:"card shadow-lg mt-4",children:Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)("p",{className:"card-text",children:"Filter heroes by elements"}),Object(g.jsx)("div",{className:"btn-group",children:n})]})})};a(29);var S=()=>Object(g.jsx)("main",{className:"app",children:Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)(f,{}),Object(g.jsxs)("div",{className:"content__interactive",children:[Object(g.jsx)(N,{}),Object(g.jsx)(R,{})]})]})}),_=a(18);const C={heroes:[],heroesLoadingStatus:"idle"};var F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HEROES_FETCHING":return{...e,heroesLoadingStatus:"loading"};case"HEROES_FETCHED":return{...e,heroes:t.payload,heroesLoadingStatus:"idle"};case"HEROES_FETCHING_ERROR":return{...e,heroesLoadingStatus:"error"};case"HERO_CREATED":return{...e,heroes:[...e.heroes,t.payload]};case"HERO_DELETED":return{...e,heroes:e.heroes.filter((e=>e.id!==t.payload))};default:return e}};const L={filters:[],filtersLoadingStatus:"idle",activeFilter:"all"};var H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTERS_FETCHING":return{...e,filtersLoadingStatus:"loading"};case"FILTERS_FETCHED":return{...e,filters:t.payload,filtersLoadingStatus:"idle"};case"FILTERS_FETCHING_ERROR":return{...e,filtersLoadingStatus:"error"};case"ACTIVE_FILTER_CHANGED":return{...e,activeFilter:t.payload};default:return e}};const w=()=>e=>t=>e("string"===typeof t?{type:t}:t);var I=Object(_.a)({reducer:{heroes:F,filters:H},middleware:e=>e().concat(w),devTools:!1});a(32);n.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(l.a,{store:I,children:Object(g.jsx)(S,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.0121e782.chunk.js.map